<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="graph-editor-style.css">
  <script src="https://unpkg.com/force-graph"></script>
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script src="graph-editor-script.js"></script>
</head>
<body>
  <div id="container">
    <div id="sidebar">
      <div class="tool-section">
        <h3><center>Node</center></h3>
        <div class="form-group">
          <input type="text" id="nodeLabel" placeholder="Node label">
        </div>
        <div class="form-group">
          <label for="nodeSize">Size:</label>
          <input type="range" id="nodeSize" min="5" max="20" value="5">
        </div>
        <div style="display: flex; gap: 10px;">
          <button id="addNodeBtn" style="flex: 1;" title="Add a new node (or press the N key)">Add</button>
          <button id="deleteNodeBtn" style="flex: 1;" disabled title="Delete selected node (or press Delete key)">Delete</button>
        </div>
      </div>

      <div class="tool-section">
        <h3><center>Link</center></h3>
        <div class="form-group">
          <label for="linkThickness">Strength:</label>
          <input type="range" id="linkThickness" min="1" max="10" value="1">
        </div>
        <div class="form-group" style="display: flex; align-items: center; gap: 10px;">
          <label style="margin: 0; white-space: nowrap;">Add Links:</label>
          <label class="switch" style="flex: 1; max-width: 40px;">
            <input type="checkbox" id="addLinksToggle" checked>
            <span class="slider"></span>
          </label>
        </div>
        <div style="display: flex; gap: 10px;">
          <button id="deleteLinkBtn" style="flex: 1; opacity: 0.5;" disabled title="Delete selected link (or press Delete key)">Delete</button>
        </div>
      </div>

      <div class="tool-section">
        <h3><center>Color</center></h3>
        <div class="color-palette" id="colorPalette">
          <div class="color-option" style="background-color: #1f77b4;" data-color="#1f77b4" title="Blue"></div>
          <div class="color-option" style="background-color: #ff7f0e;" data-color="#ff7f0e" title="Orange"></div>
          <div class="color-option" style="background-color: #17becf;" data-color="#17becf" title="Teal"></div>
          <div class="color-option" style="background-color: #bcbd22;" data-color="#bcbd22" title="Gold"></div>
          <div class="color-option" style="background-color: #9467bd;" data-color="#9467bd" title="Purple"></div>
          <div class="color-option" style="background-color: #8c564b;" data-color="#8c564b" title="Brown"></div>
          <div class="color-option" style="background-color: #e377c2;" data-color="#e377c2" title="Pink"></div>
          <div class="color-option" style="background-color: #7f7f7f;" data-color="#7f7f7f" title="Gray"></div>
        </div>
        <div class="color-picker-container" id="colorPickerContainer" title="Create a custom color">
          <input type="color" id="colorPicker">
        </div>
      </div>

      <div class="tool-section">
        <h3><center>Graph</center></h3>
        <div style="display: flex; gap: 10px;">
          <button id="autoLayoutBtn" style="flex: 1;" title="Automatically arrange the graph">Layout</button>
          <button id="clearGraphBtn" style="flex: 1;" title="Clear the graph">Clear</button>
        </div>
        <div style="display: flex; gap: 10px; margin-top: 10px;">
          <button id="saveGraphBtn" style="flex: 1;" title="Save the current graph to a file">Save</button>
          <button id="loadGraphBtn" style="flex: 1;" title="Load a graph from a file">Load</button>
        </div>
        <div class="form-group" style="margin-top: 10px;">
          <input type="text" id="graphName" placeholder="Graph name">
        </div>
        <div id="graphError" style="display: none; margin-top: 10px; padding: 8px; background-color: #ffebee; color: #c62828; border-radius: 4px;">
          <span id="errorMessage"></span>
        </div>
      </div>
    </div>
    <div id="graph"></div>
  </div>
  <div id="clearConfirmModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h3>Clear Graph</h3>
      <p>You have unsaved changes. What would you like to do?</p>
      <div class="modal-buttons">
        <button id="saveAndClearBtn" class="modal-btn">Save & Clear</button>
        <button id="clearWithoutSaveBtn" class="modal-btn danger">Clear without Saving</button>
        <button id="cancelClearBtn" class="modal-btn">Cancel</button>
      </div>
    </div>
  </div>
  <div id="loadConfirmModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h3>Load Graph</h3>
      <p>You have unsaved changes. What would you like to do?</p>
      <div class="modal-buttons">
        <button id="saveAndLoadBtn" class="modal-btn">Save & Load</button>
        <button id="loadWithoutSaveBtn" class="modal-btn danger">Load without Saving</button>
        <button id="cancelLoadBtn" class="modal-btn">Cancel</button>
      </div>
    </div>
  </div>
</body>
</html> 